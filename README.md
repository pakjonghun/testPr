## 개요

- 내용 : 테스트코드 작성 연습, 및 개념 정리
- 테스팅이란?

  - 버그 찾기
  - 제품 서비스(함수, 기능. ui, api, 성능) 품질 확인
  - 작동 검증 확인

- 테스트코드 작성 추세

  - 요즘 테스트코드 작성 추세 : 쉽고, 높은 커버리지, 빠른속도

- 왜 작성하는가?

  - 제품 기능에 대한 자신감!
  - 기능 정상동작 확인
  - 요구사항 확인 만족 확률 증가
  - 이슈 예측
  - 버그 빠르게 발견
  - 자신감 있는 리팩토링
  - 손쉬운 유지보수
  - 코드의 품질 향상
  - 코드간 의존성 낮춤(디커플링)
  - 좋은 문서화
  - 개발시간 절약

- test 피라미드란?

  - 공통된 테스트 를 말함ㄴ
  - unit > integration > e2e
  - unit : 단위별로 테스트, 비용이 가장싸다, 제일 쉽다, 가장빠르다
  - intergation : 여러 단위를 묶어서 테스트, 중간 비용, 조금 어려움, 조금 느림
  - e2e : ui 사용자 테스트라고도 함, 사용자가 실제 사용하는 테스트, 비용 가장 많이 발생, 까다로움, 가장 느림
  - 유닛테스트만 할까? nono 여러개 함께 테스트 해 봐야 , 실제 사용자가 사용하는 테스트를 해봐야 함.!!

- TDD ? : 하던말던 개인자유 팀의 자유, **중요한 것은 메인에 넣을 때, 리뷰받기 전에, 푸시 전에 테코를 넣어서 머지 해야 함**

  - 테스트 먼저 작성 => 코드작성 => 테코 작성 => 코드작성 => 필요시 리팩토링 무한 반복 끝날때까지
  - 시스템 전반적 설계 향상, 요구 분석사항 이해, 개발 집중력 향상 효과가 있음
  - 좋은 문서화의 효과 때문에 테코를 작성해라!
  - 설계에 대한 고민을 할때도 TDD 사용 할 수도 있음
  - ui 코드와 business code 를 나눠서!!! business 로직과 ui 를 테스트 해보자!

- CI/CD
  - 모든 코드에 테코가 있을 때 ci/cd 가 더 효율적이다.

## 유닛테스트 용어

- runner : 실행후 결과 생성
- assertion : 테스트 조건, 비교를 통한 테스트 로직

## usage

- 깃을 사용한다면 변경된 부분만 자동

```
    "test": "jest --watch",
```

- 싹다 테스트 한다

```
    "test": "jest --watchAll",
```

## 원칙

- 개략적인 원칙
  - 테스트 코드는 영원히 유지보수 해야한다.
  - 테스트코드에서는 내부구현사항을 테스트하면 안된다.(내부 지역변수를 바꾸면 테스트 실패하고 또 새로 작성하고 해야 하므로..), private 는 절대 테스트 하지 않는다!!, 멤버변수도 테스트 하지 않는다!!, 오로지 api 만 갖고 한다!!
  - 재사용성을 위해 반복되는 코드는 없애주자(테스트 유틸리티 파일에 빼주는 등)
  - 배포에 포함되지 않도록 ignore 하던지 잘 !! 없앨 것
  - 테스트코드를 통한 문서화 효과가 있다 신경써서 제목 내용 잘 작성 하자!
- 디테일한 원칙
  - F : Fast 느린 것에 대한 의존성 낮추기(테스트는 빠르게 실행되야 한다) - Stub 나 Mock
  - I : Isolate 독립적인 최소한의 유닛으로 검증한다.
  - R : Repeatable 실행할때마다 결과가 같아야 한다. : 외부환경 다른 모듈에 의존하는 테스트는 x
  - S : Self-Validating 알아서 자동으로 테스트 되고 validate 되야 한다. + CI/CD
  - T : Timely 시기 적절하게 작성한다. 배포 전에 푸시 전에 리뷰전에 꼭 작성해라

## 테스트코드 구조 : 복잡할 경우에만 구조를 따져보거나 주석을 달아거나 1칸 띄업보자

3A

- 준비(Arrange) : 재사용에 중점을 둘 것
- 실행(Act) : 의도적인 실패 과정도 넣어볼 것(특히 버그 수정 때 유용)
- 검증(Assert) : 가장 마지막 검증 마지막에 오는 것이 좋다.

GWT

- Give 받아서
- When 코드 작동할때
- Then 그 담에 뭐가 나온다

## 테스트 범위

- 모든 요구사항이 정상작동하는지 확인
  - B : 모든 min-max, null, undefined, otherType, Infinity 등등 에서 테스트
  - I : 거꾸로 역관계를 적용해서 검증 : 일관성있게 1~5 , 5~1 , + - add delete
  - C : cross-check 다른수단으로 재 검증 A 알고리즘, B 알고리즘
    - 내가 어떤 라이브러리르 만들었다면?
    - 그 라이브러리와 내가 작성한 라이브러리로 결과값을 각각 비교 해볼 수 있겠지?
  - E : 오류에 대해서 처리는 하는지? 여러 가지 오류 에서 검증
  - P 성능 확인은 테스트로 정확한 수치로 확인한다 : 이렇게 하니까 속도가 몇 ms 빨라짐!

## 테스트의 조건

- C : 특정한 포맷을 준수하는가? : 여러가지 포멧애 대한 테스트
- O : 순서 조건을 확인한다.
- R : 숫자의 범위 min-max , 벗어날때도 확인
- R : 레퍼런스 : 외부 의존성 확인(if(false)일때 도 확인)
- E : Existance 존재하지 않을 경우 어떻게 작동하는가?
- C : 0-1-n 법칙 많이 있을때, 쪼끔 있을때 동작 확인
- T : time 상대, 절대, 동시의 일을 검증, 순서가 꼬였을때, 소비시간, 지역시간 등
